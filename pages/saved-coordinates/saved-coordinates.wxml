<!--pages/saved-coordinates/saved-coordinates.wxml-->
<view class="container saved-coordinates-container">
  <view class="page-header">
    <text class="page-title">ä¿å­˜çš„åæ ‡</text>
    <view class="refresh-button" bindtap="refreshCoordinates">
      <text class="refresh-icon">ğŸ”„</text>
      <text class="refresh-text">åˆ·æ–°</text>
    </view>
  </view>
  
  <!-- è°ƒè¯•ä¿¡æ¯ -->
  <view class="debug-info">
    <text class="debug-text">å·²åŠ è½½ {{coordinates.length}} ä¸ªåæ ‡ç‚¹</text>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-icon"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- é”™è¯¯æç¤º -->
  <view class="error-container" wx:elif="{{error}}">
    <text class="error-text">{{error}}</text>
  </view>

  <!-- åæ ‡åˆ—è¡¨ -->
  <view class="coordinates-list" wx:elif="{{coordinates.length > 0}}">
    <view class="coordinate-item" wx:for="{{coordinates}}" wx:key="id">
      <view class="coordinate-info" bindtap="viewCoordinate" data-index="{{index}}">
        <view class="coordinate-name">{{item.name}}</view>
        <view class="coordinate-value">{{item.raw}}</view>
        <view class="coordinate-time">{{item.timestamp}}</view>
      </view>
      <view class="coordinate-actions">
        <view class="action-button map-button" bindtap="viewInMap" data-index="{{index}}">
          <text class="action-icon">ğŸ—ºï¸</text>
        </view>
        <view class="action-button delete-button" bindtap="deleteCoordinate" data-index="{{index}}" wx:if="{{item.notes !== 'ç³»ç»Ÿé»˜è®¤åæ ‡'}}">
          <text class="action-icon">ğŸ—‘ï¸</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-container" wx:else>
    <text class="empty-text">æš‚æ— ä¿å­˜çš„åæ ‡</text>
  </view>

  <!-- åº•éƒ¨æŒ‰é’®åŒºåŸŸ -->
  <view class="bottom-buttons">
    <view class="button-row">
      <button class="add-button" bindtap="addCurrentLocation">
        <text class="button-text">æ·»åŠ å½“å‰ä½ç½®</text>
      </button>
      <button class="clear-cache-button" bindtap="clearCache">
        <text class="button-text">æ¸…é™¤ç¼“å­˜</text>
      </button>
    </view>
  </view>
</view> 